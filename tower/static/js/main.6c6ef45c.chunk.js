(this["webpackJsonptower-monitoring-system"]=this["webpackJsonptower-monitoring-system"]||[]).push([[0],{509:function(e,t,c){},527:function(e,t,c){},528:function(e,t,c){},529:function(e,t,c){},546:function(e,t,c){},547:function(e,t,c){},911:function(e,t,c){},924:function(e,t,c){},925:function(e,t,c){},926:function(e,t,c){"use strict";c.r(t);var a,n,i,r=c(13),l=c(1),s=c(39),o=c.n(s),u=(c(509),c(11)),d=c(456),j=c.n(d),m=(c(527),function(){return Object(r.jsx)("div",{className:"header-container",children:Object(r.jsx)("div",{className:"header-container-title",children:"\u8f93\u7535\u6746\u5854\u72b6\u6001\u76d1\u63a7\u5e73\u53f0"})})}),b=(c(528),function(e){var t=e.title,c=e.children;return Object(r.jsxs)("div",{className:"home-card-item",children:[Object(r.jsx)("div",{className:"home-card-item-title",children:t}),Object(r.jsx)("div",{className:"home-card-item-inner",children:c})]})}),v=c(934),O=(c(529),function(e){var t=e.moleculeNumber,c=e.denominatorNumber,a=e.title;return Object(r.jsxs)("div",{className:"device-details-number-progress",children:[Object(r.jsx)(v.a,{type:"circle",width:150,percent:t/c*100,format:function(){return"".concat(t,"/").concat(c)}}),Object(r.jsx)("div",{className:"device-details-number-progress-title",children:a})]})}),h=Object(l.memo)(O),f=c(9);!function(e){e.yaw="yaw",e.roll="roll",e.pitch="pitch"}(i||(i={}));var p,x=(a={},Object(f.a)(a,i.yaw,"blue"),Object(f.a)(a,i.roll,"geekblue"),Object(f.a)(a,i.pitch,"purple"),a),D=(n={},Object(f.a)(n,i.yaw,10),Object(f.a)(n,i.roll,10),Object(f.a)(n,i.pitch,10),n),N=["volcano","orange","magenta","geekblue"],y=(c(546),function(e){var t=e.onlineDevice,c=e.normalDevice;return Object(r.jsxs)(b,{title:"\u8bbe\u5907\u8be6\u60c5",children:[Object(r.jsxs)("div",{className:"device-details-info-wrapper",children:[Object(r.jsx)("div",{className:"device-details-img"}),Object(r.jsxs)("div",{className:"device-details-info",children:[Object(r.jsx)("div",{className:"device-details-info-text",children:"\u57fa\u4e8eIPv6\u548cLPWAN\u6280\u672f\u7684\u8f93\u7535\u6746\u5854\u503e\u659c\u5ea6\u76d1\u6d4b\u9884\u8b66\u4e0e\u7ba1\u7406\u7cfb\u7edf"}),Object(r.jsx)("div",{className:"device-details-info-text",children:"\u6240\u5c5e\u7528\u6237\uff1a\u4e1c\u5317\u519c\u4e1a\u5927\u5b66"})]})]}),Object(r.jsxs)("div",{className:"device-details-number-wrapper",children:[Object(r.jsx)(h,{moleculeNumber:t,denominatorNumber:4,title:"\u5728\u7ebf\u8bbe\u5907\uff08\u4e2a\u6570\uff09"}),Object(r.jsx)(h,{moleculeNumber:c,denominatorNumber:t,title:"\u6b63\u5e38\u72b6\u6001\u8bbe\u5907\uff08\u4e2a\u6570\uff09"})]})]})}),g=Object(l.memo)(y),E=c(198),w=c(933),C=c(936),S=c(471),I=c(5),T={onlineDevice:0,normalDevice:0,currentDevice:1,deviceDataList:[]};!function(e){e.SET_DEVIECE="SET_DEVIECE",e.SET_CURRENT_DEVICE="SET_CURRENT_DEVICE"}(p||(p={}));var V=function(e,t){switch(t.type){case p.SET_DEVIECE:return Object(I.a)(Object(I.a)({},e),{},{onlineDevice:t.onlineDevice,normalDevice:t.normalDevice,deviceDataList:t.deviceDataList});case p.SET_CURRENT_DEVICE:return Object(I.a)(Object(I.a)({},e),{},{currentDevice:t.currentDevice});default:return e}},_=function(e,t){return e.filter((function(e){return e.u_id==t}))},L=(c(547),E.a.Option),F=w.a.Column,R=function(e){var t=e.currentDevice,c=e.normalDevice,a=e.deviceDataList,n=e.homeDispatch,i=Object(l.useState)([]),s=Object(u.a)(i,2),o=s[0],d=s[1];return Object(l.useEffect)((function(){c&&a.length&&(d([]),setTimeout((function(){d(function(e,t){var c=_(e,t),a=c[c.length-1];return[{key:"1",dataName:"yaw",currentValue:a.yaw},{key:"2",dataName:"roll",currentValue:a.roll},{key:"3",dataName:"pitch",currentValue:a.pitch}]}(a,t))}),100))}),[t,c,JSON.stringify(a)]),Object(r.jsxs)(b,{title:"\u5b9e\u65f6\u6570\u636e",children:[Object(r.jsxs)("div",{className:"real-time-data-select-wrapper",children:[Object(r.jsx)("div",{className:"real-time-data-select-title",children:"\u4ece\u673a\u540d\u79f0\uff1a"}),Object(r.jsx)(E.a,{value:c?t:void 0,style:{width:120},onChange:function(e){n({type:p.SET_CURRENT_DEVICE,currentDevice:e})},children:Array.from({length:c}).map((function(e,t){return Object(r.jsxs)(L,{value:t+1,children:[t+1,"\u53f7\u8bbe\u5907"]},"real-time-data-select-option-".concat(t))}))})]}),Object(r.jsx)("div",{className:"real-time-data-table-wrapper",children:c?o.length?Object(r.jsxs)(w.a,{dataSource:o,pagination:!1,children:[Object(r.jsx)(F,{title:"\u6570\u636e\u70b9\u540d\u79f0",dataIndex:"dataName",render:function(e){return Object(r.jsx)(C.a,{color:x[e],children:e},e)}},"dataName"),Object(r.jsx)(F,{title:"\u5f53\u524d\u503c",dataIndex:"currentValue",render:function(e,t){return Object(r.jsx)("span",{className:"real-time-data-table-value ".concat(e>=D[t.dataName]?"alarm":"default"),children:e})}},"currentValue"),Object(r.jsx)(F,{title:"\u62a5\u8b66\u503c",dataIndex:"alarmValue",render:function(e,t){return Object(r.jsx)(l.Fragment,{children:D[t.dataName]})}},"alarmValue")]}):Object(r.jsx)(S.a,{size:"large"}):Object(r.jsx)("div",{className:"home-no-data"})})]})},k=Object(l.memo)(R),A=c(92),P=c(935),J=c(260),z=function(e){var t,c,a,n=e.pieData,i=(a=[{type:"pie-statistic-active"}],(c="interactions")in(t={width:500,height:344,appendPadding:10,data:n,angleField:"value",colorField:"type",radius:.8,innerRadius:.6,interactions:[{type:"element-selected"},{type:"element-active"}],statistic:{title:{offsetY:-20,style:{fontSize:32},formatter:function(e){return e?e.type:"\u603b\u8ba1"}},content:{offsetY:30,style:{fontSize:32},formatter:function(e,t){return"".concat(e?e.value:t.reduce((function(e,t){return e+t.value}),0),"\u6b21")}}}})?Object.defineProperty(t,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[c]=a,t);return Object(r.jsx)(J.b,Object(I.a)({},i))},U=Object(l.memo)(z),B=(c(911),function(e){e.currentDevice;var t=e.deviceDataList,c=Object(l.useState)([]),a=Object(u.a)(c,2),n=a[0],s=a[1],o=Object(l.useState)(!1),d=Object(u.a)(o,2),j=d[0],m=d[1],v=Object(l.useState)([]),O=Object(u.a)(v,2),h=O[0],f=O[1];return Object(l.useEffect)((function(){if(t.length){var e,c=(e=t,e.filter((function(e){return e[i.yaw]>=D[i.yaw]||e[i.roll]>=D[i.roll]||e[i.pitch]>=D[i.pitch]}))).reverse();s(c),f(Array.from({length:4}).map((function(e,t){return{type:"".concat(t+1,"\u53f7\u8bbe\u5907"),value:_(c,t+1).length}})))}}),[JSON.stringify(t)]),Object(r.jsxs)(b,{title:"\u62a5\u8b66\u8bb0\u5f55",children:[Object(r.jsx)(A.a,{className:"alarm-record-btn",type:"primary",onClick:function(){return m(!0)},children:"\u67e5\u770b\u8be6\u60c5"}),Object(r.jsx)("div",{className:"alarm-record-pie",children:Object(r.jsx)(U,{pieData:h})}),Object(r.jsx)(P.a,{title:"\u8bb0\u5f55\u8be6\u60c5",visible:j,onCancel:function(){return m(!1)},footer:[Object(r.jsx)(A.a,{onClick:function(){return m(!1)},children:"\u5173\u95ed"},"back")],children:Object(r.jsx)("div",{className:"alarm-record-modal-inner",children:n.map((function(e,t){var c=[];return e[i.pitch]>=D[i.pitch]&&c.push(i.pitch),e[i.roll]>=D[i.roll]&&c.push(i.roll),e[i.yaw]>=D[i.yaw]&&c.push(i.yaw),Object(r.jsxs)("div",{className:"alarm-record-modal-item",children:[Object(r.jsxs)(C.a,{color:N[e.u_id-1],children:[e.u_id,"\u53f7\u8bbe\u5907"]}),Object(r.jsxs)("div",{className:"alarm-record-modal-item-text",children:["\u4e8b\u4ef6\u7c7b\u578b\uff1a",c.map((function(e,t){return Object(r.jsxs)(C.a,{color:x[e],children:[i[e],"\u503c"]},"alarm-record-modal-item-tag-".concat(e,"-").concat(t))})),"\u5f02\u5e38\u2014\u2014\u8f93\u7535\u6746\u5854\u5b58\u5728\u503e\u659c\u60c5\u51b5"]}),Object(r.jsxs)("div",{className:"alarm-record-modal-item-text",children:["\u62a5\u8b66\u65f6\u95f4\uff1a",e.createDate]})]},"alarm-record-modal-item-".concat(t))}))})})]})}),Y=Object(l.memo)(B),W=function(e){var t={width:560,data:e.lineData,xField:"createDate",yField:"value",seriesField:"category",yAxis:{label:{formatter:function(e){return"".concat(e).replace(/\d{1,3}(?=(\d{3})+$)/g,(function(e){return"".concat(e,",")}))}}},color:["#1979C9","#D62A0D","#FAA219"]};return Object(r.jsx)(J.a,Object(I.a)({},t))},$=Object(l.memo)(W),q=(c(924),function(e){var t=e.normalDevice,c=e.currentDevice,a=e.deviceDataList,n=Object(l.useState)([]),s=Object(u.a)(n,2),o=s[0],d=s[1];return Object(l.useEffect)((function(){if(a.length){for(var e=_(a,c),t=[],n=0;n<e.length;n++){var r=e[n],l=r.createDate,s=r.pitch,o=r.yaw,u=r.roll;t.push({createDate:l,value:s,category:i.pitch}),t.push({createDate:l,value:o,category:i.yaw}),t.push({createDate:l,value:u,category:i.roll})}d(t)}}),[JSON.stringify(a),c]),Object(r.jsx)(b,{title:"\u5386\u53f2\u8bb0\u5f55",children:Object(r.jsx)("div",{className:"historical-data-container",children:t?o.length?Object(r.jsx)($,{lineData:o}):Object(r.jsx)(S.a,{size:"large"}):Object(r.jsx)("div",{className:"home-no-data"})})})}),G=Object(l.memo)(q),H=(c(925),function(){var e=Object(l.useReducer)(V,T),t=Object(u.a)(e,2),c=t[0],a=t[1],n=Object(l.useRef)(null),i=c.onlineDevice,s=void 0===i?0:i,o=c.normalDevice,d=void 0===o?0:o,b=c.currentDevice,v=void 0===b?1:b,O=c.deviceDataList,h=void 0===O?[]:O,f=function(){j.a.get("http://47.98.249.211/tower-server/tower/getDeviceData").then((function(e){a({type:p.SET_DEVIECE,onlineDevice:4,normalDevice:4,deviceDataList:e.data.data})}))};return Object(l.useEffect)((function(){return f(),n.current=setInterval((function(){f()}),2e4),function(){clearInterval(n.current)}}),[]),Object(r.jsxs)("div",{className:"home-container",children:[Object(r.jsx)(m,{}),Object(r.jsxs)("div",{className:"home-inner",children:[Object(r.jsx)(g,{onlineDevice:s,normalDevice:d}),Object(r.jsx)(k,{currentDevice:v,normalDevice:d,deviceDataList:h,homeDispatch:a}),Object(r.jsx)(Y,{currentDevice:v,deviceDataList:h}),Object(r.jsx)(G,{normalDevice:d,currentDevice:v,deviceDataList:h})]})]})}),K=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,937)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;c(e),a(e),n(e),i(e),r(e)}))};o.a.render(Object(r.jsx)(H,{}),document.getElementById("root")),K()}},[[926,1,2]]]);
//# sourceMappingURL=main.6c6ef45c.chunk.js.map